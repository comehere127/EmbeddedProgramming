/*
 * demo.c
 *
 * Created: 8/29/2016 2:06:33 PM
 *  Author: duong
 */ 

#include <avr/io.h>
#include <avr/pgmspace.h>
#include <util/delay.h>
prog_char font7x5[] ={
	0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7d, 0x00, 0x00,
	0x00, 0x70, 0x00, 0x70, 0x00,

	0x3e, 0x45, 0x49, 0x51, 0x3e,
	0x00, 0x21, 0x7f, 0x01, 0x00,	
	0x21, 0x43, 0x45, 0x49, 0x31,
	0x42, 0x41, 0x51, 0x69, 0x46,

	0x3f, 0x44, 0x44, 0x44, 0x3f,
	0x7f, 0x49, 0x49, 0x49, 0x36,
	0x3e, 0x41, 0x41, 0x41, 0x22,

	0x02, 0x15, 0x15, 0x15, 0x0f,
	0x7f, 0x09, 0x11, 0x11, 0x0e,
	0x0e, 0x11, 0x11, 0x11, 0x02,

	0x7f, 0x7f ,0x7f, 0x7f, 0x7f
};
#define DATA_PORT	PORTD
#define DATA_DDR	DDRD
#define CTRL_PORT	PORTC
#define CTRL_DDR	DDRC

void DOTputChar75(uint8_t chr){
	uint8_t		line=1,i;
	uint16_t	tchr= chr;
	for(i=0;i<5;i++){
		CTRL_PORT = line;
		DATA_PORT = ~pgm_read_byte(&font7x5[((tchr -32)*5) + i]);
		line	<<= 1;
		_delay_loop_2(1000);
	}
}
int main(void)
{
    DATA_DDR	= 0xFF;
	CTRL_PORT	= 0xFF;
	while(1){
		DOTputChar75('4');
	}
	return 0;
}